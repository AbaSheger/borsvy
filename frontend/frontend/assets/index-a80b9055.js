import{r as e,c as t,u as s,e as a,B as r,f as l,L as n,h as i,i as o,R as d}from"./react-vendor-01c95e8d.js";import{a as c}from"./utils-vendor-2f58d12a.js";import{F as m,T as x,H as h,B as u,L as g,I as b,S as p,C as y,a as f,b as v,c as j,d as N,E as w,m as k,e as S,f as A,g as C,M as E,h as I,i as T,j as F}from"./antd-vendor-89d8a1b1.js";import{P,C as $,a as L,L as R,b as M,c as z,p as O,d as V,e as _,i as D,f as U,A as q,R as B,D as G}from"./chart-vendor-5a9fefb7.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var W={exports:{}},H={},K=e,Z=Symbol.for("react.element"),Y=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,Q=K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};function ee(e,t,s){var a,r={},l=null,n=null;for(a in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(n=t.ref),t)J.call(t,a)&&!X.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:Z,type:e,key:l,ref:n,props:r,_owner:Q.current}}H.Fragment=Y,H.jsx=ee,H.jsxs=ee,W.exports=H;var te=W.exports,se={},ae=t;se.createRoot=ae.createRoot,se.hydrateRoot=ae.hydrateRoot;const re={baseURL:{}.VITE_API_URL||"https://borsvy-backend-borsvy-295875c6.koyeb.app",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0};const{Option:le}=f,ne=[{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corp."},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"TSLA",name:"Tesla Inc."},{symbol:"META",name:"Meta Platforms Inc."},{symbol:"NVDA",name:"NVIDIA Corp."},{symbol:"BTC-USD",name:"Bitcoin USD"}],ie=({onSearch:t,isLoading:s,onToggleFavorite:a,favorites:r=[]})=>{var l;const[n,i]=e.useState(""),[o,d]=e.useState(""),S=function(t,s){const[a,r]=e.useState(t);return e.useEffect((()=>{const e=setTimeout((()=>{r(t)}),s);return()=>{clearTimeout(e)}}),[t,s]),a}(o,500),[A,C]=e.useState(!1),[E,I]=e.useState([]),[T,F]=e.useState(null),[P,$]=e.useState((()=>{const e=localStorage.getItem("searchHistory");return e?JSON.parse(e):[]})),[L,R]=e.useState([]),[M,z]=e.useState("all"),[O,V]=e.useState(!1),_=e.useRef(null);e.useEffect((()=>{function e(e){_.current&&!_.current.contains(e.target)&&V(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),e.useEffect((()=>{const e=localStorage.getItem("searchHistory");if(e)try{const t=JSON.parse(e);$(t)}catch(t){localStorage.removeItem("searchHistory")}}),[]),e.useEffect((()=>{localStorage.setItem("searchHistory",JSON.stringify(P))}),[P]),e.useEffect((()=>{(async()=>{if(!S||S.length<2)R([]);else try{const e=await c.get(`/api/stocks/autocomplete?query=${encodeURIComponent(S.trim())}`,re);R(e.data||[])}catch(e){R([])}})()}),[S]);const D=async(e=n)=>{if(e.trim())try{C(!0),F(null),P.some((t=>t.query===e))?$((t=>[{query:e,timestamp:(new Date).toISOString()},...t.filter((t=>t.query!==e))].slice(0,10))):$((t=>[{query:e,timestamp:(new Date).toISOString()},...t].slice(0,10)));const s=(await c.get(`/api/stocks/search?query=${encodeURIComponent(e.trim())}&type=${M}`,re)).data;I(s),t&&t(s),0===s.length&&k.info("No results found")}catch(s){F("Failed to fetch results. Please try again."),I([]),t&&t([])}finally{C(!1),V(!1)}else k.info("Please enter a search term")},U=[{value:"all",label:"All"},{value:"stock",label:"Stocks"},{value:"etf",label:"ETFs"},{value:"crypto",label:"Crypto"},{value:"forex",label:"Forex"}],q=[{key:"popular",label:te.jsxs("span",{children:[te.jsx(m,{})," Popular"]}),children:te.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ne.map((e=>te.jsx(x,{color:"blue",className:"cursor-pointer py-1 px-3 text-sm",onClick:()=>(e=>{i(e.symbol),D(e.symbol)})(e),children:e.symbol},e.symbol)))})},{key:"history",label:te.jsxs("span",{children:[te.jsx(h,{})," Recent Searches"]}),children:te.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:P.length>0?P.map(((e,t)=>te.jsx(x,{className:"cursor-pointer py-1 px-3 text-sm bg-gray-100 dark:bg-[#333333] text-gray-800 dark:text-gray-300",onClick:()=>D(e.query),children:e.query},t))):te.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No recent searches"})}),extra:P.length>0&&te.jsx(u,{type:"text",size:"small",onClick:()=>{$([]),localStorage.removeItem("searchHistory"),k.success("Search history cleared")},className:"text-gray-500 hover:text-red-500",children:"Clear"})}];return te.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-2xl shadow-md p-6 border border-gray-200 dark:border-[#333333] transition-all duration-300",children:[te.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-gray-200 flex items-center",children:[te.jsx(g,{className:"mr-3 text-blue-500"})," Stock Search"]}),te.jsxs("div",{className:"flex flex-col mb-6",children:[te.jsxs("div",{className:"flex items-center",children:[te.jsxs("div",{className:"relative flex-1",ref:_,children:[te.jsx(b,{placeholder:"Search for stocks, ETFs, or companies...",value:n,onChange:e=>{const t=e.target.value;i(t),d(t),t.length>=2?V(!0):V(!1)},onKeyPress:e=>{"Enter"===e.key&&D()},onFocus:()=>n.length>=2&&V(!0),prefix:te.jsx(p,{className:"text-gray-400"}),suffix:n&&te.jsx(y,{className:"text-gray-400 cursor-pointer",onClick:()=>i("")}),className:"rounded-l-lg dark:bg-[#262626] dark:border-[#333333] dark:text-gray-200 h-12 text-base",size:"large"}),O&&L.length>0&&te.jsx("div",{className:"absolute w-full bg-white dark:bg-[#262626] border border-gray-200 dark:border-[#333333] shadow-lg rounded-b-lg mt-1 max-h-72 overflow-y-auto z-50",children:L.map(((e,t)=>te.jsxs("div",{className:"px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-[#333333] transition-colors duration-200 flex justify-between items-center",onClick:()=>(e=>{i(e.symbol),V(!1),D(e.symbol)})(e),children:[te.jsxs("div",{children:[te.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-200",children:e.symbol}),te.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.name})]}),te.jsx("div",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 px-2 py-1 rounded",children:e.type||"Stock"})]},`${e.symbol}-${t}`)))})]}),te.jsx("div",{className:"ml-2",children:te.jsx(f,{defaultValue:"all",value:M,onChange:z,className:"dark:bg-[#262626] h-12 border-0 dark:border-[#333333]",style:{width:120},size:"large",popupMatchSelectWidth:!1,suffixIcon:te.jsx(v,{}),children:U.map((e=>te.jsx(le,{value:e.value,children:e.label},e.value)))})}),te.jsx(u,{type:"primary",onClick:()=>D(),loading:A,className:"rounded-r-lg bg-blue-500 hover:bg-blue-600 border-blue-500 h-12 px-6 ml-2",size:"large",children:"Search"})]}),te.jsx("div",{className:"mt-5",children:te.jsx(j,{defaultActiveKey:"popular",size:"small",className:"dark:text-gray-300",items:q})})]}),T&&te.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4 animate-pulse",children:T}),A&&te.jsx("div",{className:"flex justify-center py-12",children:te.jsxs("div",{className:"flex flex-col items-center",children:[te.jsx(N,{size:"large"}),te.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Searching for stocks..."})]})}),!A&&0===E.length&&!T&&te.jsxs("div",{className:"bg-gray-50 dark:bg-[#1d1d1d] rounded-lg p-8 mt-4 text-center border border-gray-200 dark:border-[#333333]",children:[te.jsx(w,{description:te.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-base",children:"Start searching for stocks, ETFs, or cryptocurrency to see results"}),image:w.PRESENTED_IMAGE_SIMPLE,className:"my-8"}),te.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-md mx-auto",children:'Try searching for a company name like "Apple" or a stock symbol like "AAPL", or browse the popular searches above.'})]}),!A&&E.length>0&&te.jsxs("div",{className:"flex justify-between items-center px-1 py-2 mb-4 text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-[#333333]",children:[te.jsxs("span",{children:["Found ",E.length," result",1!==E.length?"s":"",' for "',n,'"']}),te.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 px-2 py-1 rounded",children:"all"===M?"All Types":null==(l=U.find((e=>e.value===M)))?void 0:l.label})]})]})};function oe({stocks:e,onSelectStock:t,favorites:s,onToggleFavorite:a,isLoading:r=!1}){if(r)return te.jsx("div",{className:"bg-[#1a1a1a] rounded-xl shadow-sm p-8 border border-[#333333]",children:te.jsxs("div",{className:"flex flex-col items-center justify-center",children:[te.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-500 border-t-transparent mb-4"}),te.jsx("span",{className:"text-[#e6e6e6] font-semibold",children:"Searching for stocks..."}),te.jsx("span",{className:"text-gray-400 text-sm mt-2",children:"This may take a moment due to API rate limits"})]})});if(!e||!Array.isArray(e)||0===e.length)return te.jsx("div",{className:"bg-[#1a1a1a] rounded-xl shadow-sm p-8 border border-[#333333]",children:te.jsxs("div",{className:"text-center",children:[te.jsx("p",{className:"text-[#e6e6e6] font-bold text-lg",children:"No stocks found"}),te.jsx("p",{className:"text-gray-400 text-sm mt-2",children:'Try searching for a stock symbol like "AAPL" or "MSFT"'})]})});const l=e.reduce(((e,t)=>(e.find((e=>e.symbol===t.symbol))||e.push(t),e)),[]);return te.jsxs("div",{className:"space-y-4",children:[te.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-4",children:["Found ",l.length," stock",1!==l.length?"s":""]}),l.map((e=>{var r;return te.jsxs("div",{onClick:()=>t(e),className:"bg-[#1a1a1a] rounded-xl p-6 border border-[#333333] hover:border-blue-500 \n                   cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10\n                   flex flex-col gap-3",children:[te.jsxs("div",{className:"flex justify-between items-start",children:[te.jsxs("div",{className:"flex-1",children:[te.jsx("h3",{className:"text-xl font-bold text-[#e6e6e6]",children:e.symbol}),te.jsx("p",{className:"text-gray-400 text-sm mt-1",children:e.name})]}),te.jsx("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"p-2 transition-colors duration-300 rounded-full hover:bg-[#333333] "+(s.some((t=>t.symbol===e.symbol))?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"),children:s.some((t=>t.symbol===e.symbol))?"â¤ï¸":"ðŸ¤"})]}),te.jsxs("div",{className:"flex justify-between items-center mt-2",children:[te.jsxs("span",{className:"text-2xl font-bold text-[#e6e6e6]",children:["$",(null==(r=e.price)?void 0:r.toFixed(2))||"N/A"]}),void 0!==e.changePercent&&te.jsxs("div",{className:"px-4 py-2 rounded-full text-sm font-bold "+(e.changePercent>=0?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]},e.symbol)}))]})}oe.propTypes={stocks:P.array,onSelectStock:P.func.isRequired,favorites:P.array.isRequired,onToggleFavorite:P.func.isRequired,isLoading:P.bool};const de=e.createContext(),ce=({children:t})=>{const[s,a]=e.useState((()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}));e.useEffect((()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(s),localStorage.setItem("theme",s)}),[s]);return te.jsx(de.Provider,{value:{theme:s,toggleTheme:()=>{a((e=>"dark"===e?"light":"dark"))}},children:t})},me=()=>{const t=e.useContext(de);if(void 0===t)throw new Error("useTheme must be used within a ThemeProvider");return t};function xe({favorites:e,onSelectStock:t,onToggleFavorite:s}){const{theme:a}=me();return e&&Array.isArray(e)&&0!==e.length?te.jsx("div",{className:"space-y-3",children:e.map((e=>{const r=(null==e?void 0:e.symbol)||"Unknown",l=(null==e?void 0:e.name)||"Unknown Company",n="number"==typeof(null==e?void 0:e.price)?e.price:0,i="number"==typeof(null==e?void 0:e.change)?e.change:0,o="number"==typeof(null==e?void 0:e.changePercent)?e.changePercent:0;return te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border-[#333333]":"bg-white border-gray-200")+" rounded-xl border p-4 hover:border-blue-500 \n                     hover:shadow-lg hover:shadow-blue-500/10 transition-all duration-300 cursor-pointer",onClick:()=>t(e),children:[te.jsxs("div",{className:"flex justify-between items-start",children:[te.jsxs("div",{children:[te.jsx("h3",{className:"text-lg font-bold "+("dark"===a?"text-[#e6e6e6]":"text-gray-800"),children:r}),te.jsx("p",{className:("dark"===a?"text-gray-400":"text-gray-500")+" font-medium",children:l})]}),te.jsx("button",{onClick:t=>{t.stopPropagation(),s(e)},className:"text-red-500 hover:text-red-600 p-1 transition-colors duration-300","aria-label":`Remove ${r} from favorites`,children:"â¤ï¸"})]}),te.jsxs("div",{className:"flex justify-between items-center mt-3",children:[te.jsxs("span",{className:"text-xl font-bold "+("dark"===a?"text-[#e6e6e6]":"text-gray-800"),children:["$",n.toFixed(2)]}),te.jsxs("div",{className:"px-3 py-1 rounded-full text-sm font-bold "+(i>=0?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:[te.jsx("span",{children:i>=0?"â†‘":"â†“"}),te.jsx("span",{children:Math.abs(i).toFixed(2)}),te.jsxs("span",{children:[" (",o.toFixed(2),"%)"]})]})]})]},r)}))}):te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border-[#333333] text-[#e6e6e6]":"bg-white border-gray-200 text-gray-800")+" rounded-xl p-6 border shadow-sm",children:[te.jsx("p",{className:"text-center font-medium",children:"No favorite stocks yet"}),te.jsx("p",{className:("dark"===a?"text-gray-400":"text-gray-500")+" text-center text-sm mt-2",children:"Add stocks to your favorites for quick access"})]})}xe.propTypes={favorites:P.array,onSelectStock:P.func.isRequired,onToggleFavorite:P.func.isRequired},$.register(L,R,M,z,O,V,_,D);const he=({symbol:t,interval:a="1D"})=>{const{symbol:r}=s(),l=t||r,[n,i]=e.useState(null),[o,d]=e.useState(!0),[m,x]=e.useState(null),{theme:h}=me();if(e.useEffect((()=>{(async()=>{if(!l||"undefined"===l)return x("Invalid symbol"),void d(!1);try{d(!0);const e=await c.get(`/api/analysis/${l}/price-history?interval=${a}`,re);e.data&&Array.isArray(e.data)?i(e.data.filter((e=>e&&e.price&&e.timestamp))):x("Invalid price data format")}catch(e){x("Failed to fetch price data")}finally{d(!1)}})()}),[l,a]),o)return te.jsx(N,{size:"large"});if(m)return te.jsx("div",{className:"text-red-500 text-center p-4",children:m});if(!n||0===n.length)return te.jsx("div",{className:"text-gray-400 text-center p-4",children:"No price data available"});const u={labels:n.map((e=>new Date(e.timestamp).toLocaleDateString())),datasets:[{label:"Price",data:n.map((e=>e.price)),borderColor:"dark"===h?"rgb(75, 192, 192)":"rgb(53, 162, 235)",tension:.1,fill:!0,backgroundColor:"dark"===h?"rgba(75, 192, 192, 0.1)":"rgba(53, 162, 235, 0.1)"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"dark"===h?"#e6e6e6":"#1a1a1a"}},title:{display:!0,text:`${l} Price History`,color:"dark"===h?"#e6e6e6":"#1a1a1a"}},scales:{y:{beginAtZero:!1,grid:{color:"dark"===h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:"dark"===h?"#e6e6e6":"#1a1a1a"}},x:{grid:{color:"dark"===h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:"dark"===h?"#e6e6e6":"#1a1a1a"}}}};return te.jsx("div",{className:"w-full h-full",children:te.jsx(U,{data:u,options:g})})},ue=e=>{const t=Number(e);return isNaN(t)||0===t?"N/A":t>=1e12?`$${(t/1e12).toFixed(2)}T`:t>=1e9?`$${(t/1e9).toFixed(2)}B`:t>=1e6?`$${(t/1e6).toFixed(2)}M`:t>=1e3?`$${(t/1e3).toFixed(2)}K`:`$${t.toFixed(2)}`};function ge({symbol:t}){var s;const{theme:a}=me(),[r,l]=e.useState(null),[n,i]=e.useState(!1),[o,d]=e.useState(null);return e.useEffect((()=>{let e=!0;return(async()=>{var s;if(t)try{i(!0),d(null);const s=await c.get(`http://localhost:8080/api/stocks/${t}/peers`);e&&s.data&&l(s.data)}catch(a){e&&(404===(null==(s=a.response)?void 0:s.status)?d("Peer comparison data is not available for this stock."):d("Failed to fetch peer comparison data"))}finally{e&&i(!1)}})(),()=>{e=!1}}),[t]),n?te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border border-[#333333]":"bg-white")+" p-6 rounded-lg shadow-sm",children:[te.jsxs("h2",{className:`text-xl font-bold ${"dark"===a?"text-gray-200":"text-gray-900"} mb-6 flex items-center`,children:[te.jsx("span",{className:"mr-2 text-blue-500",children:"ðŸ¢"}),"Industry Comparison"]}),te.jsxs("div",{className:"animate-pulse space-y-4",children:[te.jsx("div",{className:`h-24 ${"dark"===a?"bg-[#333333]":"bg-gray-100"} rounded-lg`}),te.jsx("div",{className:`h-64 ${"dark"===a?"bg-[#333333]":"bg-gray-100"} rounded-lg`}),te.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[te.jsx("div",{className:`h-20 ${"dark"===a?"bg-[#333333]":"bg-gray-100"} rounded-lg`}),te.jsx("div",{className:`h-20 ${"dark"===a?"bg-[#333333]":"bg-gray-100"} rounded-lg`})]})]})]}):o?te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border border-[#333333]":"bg-white")+" p-6 rounded-lg shadow-sm",children:[te.jsxs("h2",{className:`text-xl font-bold ${"dark"===a?"text-gray-200":"text-gray-900"} mb-6 flex items-center`,children:[te.jsx("span",{className:"mr-2 text-blue-500",children:"ðŸ¢"}),"Industry Comparison"]}),te.jsx("div",{className:("dark"===a?"text-gray-400":"text-gray-600")+" text-center py-8",children:o})]}):!o&&r&&r.peers&&0!==r.peers.length?te.jsx("div",{className:"space-y-6",children:te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border border-[#333333]":"bg-white")+" p-6 rounded-lg shadow-sm",children:[te.jsxs("h2",{className:`text-xl font-bold ${"dark"===a?"text-gray-200":"text-gray-900"} mb-6 flex items-center`,children:[te.jsx("span",{className:"mr-2 text-blue-500",children:"ðŸ¢"}),"Industry Peers"]}),te.jsx("div",{className:"overflow-x-auto",children:te.jsxs("table",{className:"min-w-full",children:[te.jsx("thead",{className:""+("dark"===a?"bg-[#262626] border-b border-[#333333]":"bg-gray-100"),children:te.jsxs("tr",{children:[te.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs sm:text-sm font-semibold text-gray-400",children:"Company"}),te.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs sm:text-sm font-semibold text-gray-400",children:"Price"}),te.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs sm:text-sm font-semibold text-gray-400",children:"Change"}),te.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs sm:text-sm font-semibold text-gray-400",children:"P/E Ratio"}),te.jsx("th",{className:"px-3 sm:px-6 py-3 text-right text-xs sm:text-sm font-semibold text-gray-400",children:"Market Cap"})]})}),te.jsx("tbody",{className:"divide-y divide-[#333333]",children:r.peers.map((e=>te.jsxs("tr",{className:"hover:bg-[#262626]",children:[te.jsx("td",{className:"px-3 sm:px-6 py-3 text-xs sm:text-sm text-[#e6e6e6]",children:e.name}),te.jsxs("td",{className:"px-3 sm:px-6 py-3 text-xs sm:text-sm text-right text-[#e6e6e6]",children:["$",(e.price||0).toFixed(2)]}),te.jsxs("td",{className:"px-3 sm:px-6 py-3 text-xs sm:text-sm text-right "+((e.change||0)>=0?"text-green-400":"text-red-400"),children:[(e.change||0)>=0?"+":"",(e.change||0).toFixed(2),"%"]}),te.jsx("td",{className:"px-3 sm:px-6 py-3 text-xs sm:text-sm text-right text-[#e6e6e6]",children:e.peRatio?e.peRatio.toFixed(2):"N/A"}),te.jsx("td",{className:"px-3 sm:px-6 py-3 text-xs sm:text-sm text-right text-[#e6e6e6]",children:ue(e.marketCap||0)})]},e.symbol)))})]})}),te.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-6",children:[te.jsxs("div",{className:"rounded-lg overflow-hidden shadow-sm border border-[#333333]",children:[te.jsx("div",{className:"bg-[#262626] px-3 sm:px-4 py-2 border-b border-[#333333]",children:te.jsx("h3",{className:"text-blue-400 text-sm sm:text-base font-semibold",children:"Industry Average P/E"})}),te.jsxs("div",{className:"p-3 sm:p-4 bg-[#1a1a1a]",children:[te.jsx("div",{className:"text-xl sm:text-2xl font-bold text-[#e6e6e6]",children:(null==(s=r.avgPE)?void 0:s.toFixed(2))||"N/A"}),te.jsx("div",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:r.currentPE&&r.avgPE?r.currentPE>r.avgPE?`Above industry average by ${(100*(r.currentPE/r.avgPE-1)).toFixed(1)}%`:`Below industry average by ${(100*(1-r.currentPE/r.avgPE)).toFixed(1)}%`:"Comparison not available"})]})]}),te.jsxs("div",{className:"rounded-lg overflow-hidden shadow-sm border "+(Number(r.relativeStrength)>=0?"border-green-500/20":"border-red-500/20"),children:[te.jsx("div",{className:"px-4 py-2 border-b "+(Number(r.relativeStrength)>=0?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"),children:te.jsx("h3",{className:"font-semibold "+(Number(r.relativeStrength)>=0?"text-green-400":"text-red-400"),children:"Relative Performance"})}),te.jsxs("div",{className:"p-4 bg-[#1a1a1a]",children:[te.jsx("div",{className:"text-2xl font-bold "+(Number(r.relativeStrength)>=0?"text-green-400":"text-red-400"),children:null!==r.relativeStrength?te.jsxs(te.Fragment,{children:[Number(r.relativeStrength)>=0?"+":"",r.relativeStrength.toFixed(2),"%"]}):"N/A"}),te.jsx("div",{className:"text-sm text-gray-400 mt-1",children:null!==r.relativeStrength?Number(r.relativeStrength)>=0?"Outperforming industry peers":"Underperforming industry peers":"Performance comparison not available"})]})]})]})]})}):te.jsxs("div",{className:("dark"===a?"bg-[#1a1a1a] border border-[#333333]":"bg-white")+" p-6 rounded-lg shadow-sm",children:[te.jsxs("h2",{className:`text-xl font-bold ${"dark"===a?"text-gray-200":"text-gray-900"} mb-6 flex items-center`,children:[te.jsx("span",{className:"mr-2 text-blue-500",children:"ðŸ¢"}),"Industry Comparison"]}),te.jsx("div",{className:("dark"===a?"text-gray-400":"text-gray-600")+" text-center py-8",children:"No peer comparison data available."})]})}function be({news:e}){const{theme:t}=me();return e&&Array.isArray(e)&&0!==e.length?te.jsxs("div",{className:("dark"===t?"bg-[#1a1a1a] border-[#333333] text-[#e6e6e6]":"bg-white border-gray-200 text-gray-800")+" rounded-2xl shadow-lg p-4 sm:p-6 border",children:[te.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:[te.jsx("span",{className:"mr-2 text-blue-400",children:"ðŸ“°"}),"Recent News"]}),te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5",children:e.map(((e,s)=>te.jsxs("div",{className:`flex flex-col ${"dark"===t?"bg-[#262626] border-[#333333] hover:bg-[#2a2a2a]":"bg-gray-50 border-gray-200 hover:bg-gray-100"} rounded-xl border transition-colors overflow-hidden h-full`,children:[te.jsx("div",{className:"h-48 overflow-hidden",children:te.jsx("img",{src:e.thumbnail||`https://placehold.co/400x300/${"dark"===t?"1a1a1a/666666":"eeeeee/999999"}/png?text=No+Image`,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=`https://placehold.co/400x300/${"dark"===t?"1a1a1a/666666":"eeeeee/999999"}/png?text=No+Image`}})}),te.jsxs("div",{className:"flex flex-col flex-grow p-4",children:[te.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-base font-semibold text-blue-400 hover:text-blue-300 mb-2 line-clamp-2",children:e.title}),te.jsxs("div",{className:`flex flex-wrap items-center text-xs ${"dark"===t?"text-gray-400":"text-gray-500"} mb-3`,children:[te.jsx("span",{children:e.source}),te.jsx("span",{className:"mx-2",children:"â€¢"}),te.jsx("span",{children:e.date}),e.sentiment&&te.jsxs(te.Fragment,{children:[te.jsx("span",{className:"mx-2",children:"â€¢"}),te.jsx("div",{className:"px-2 py-1 text-xs font-semibold rounded-full "+("POSITIVE"===e.sentiment||"positive"===e.sentiment?"bg-green-500/20 text-green-400":"NEGATIVE"===e.sentiment||"negative"===e.sentiment?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"),children:"POSITIVE"===e.sentiment||"positive"===e.sentiment?"Positive":"NEGATIVE"===e.sentiment||"negative"===e.sentiment?"Negative":"Neutral"})]})]}),te.jsx("p",{className:("dark"===t?"text-gray-300":"text-gray-600")+" text-sm line-clamp-3 flex-grow",children:e.summary}),te.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"mt-3 text-sm font-medium text-blue-400 hover:text-blue-300 inline-flex items-center",children:["Read more",te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]},s)))})]}):te.jsxs("div",{className:("dark"===t?"bg-[#1a1a1a] border-[#333333] text-[#e6e6e6]":"bg-white border-gray-200 text-gray-800")+" rounded-2xl shadow-lg p-4 sm:p-6 border",children:[te.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:[te.jsx("span",{className:"mr-2 text-blue-400",children:"ðŸ“°"}),"Recent News"]}),te.jsx("p",{className:("dark"===t?"text-gray-400":"text-gray-500")+" text-center py-4",children:"No recent news available"})]})}ge.propTypes={symbol:P.string},be.propTypes={news:P.arrayOf(P.shape({title:P.string.isRequired,url:P.string.isRequired,source:P.string.isRequired,date:P.string.isRequired,summary:P.string.isRequired,thumbnail:P.string}))},$.register(L,R,M,z,O,V,_,q,D,B);const pe=({analysis:t,technicalData:s})=>{var a,r,l;const[n,i]=e.useState(null),[o,d]=e.useState(null),[c,m]=e.useState(null),[x,h]=e.useState(null),u=e.useRef(null),g=e.useRef(null),b=e.useRef(null);e.useEffect((()=>{}),[t,s]),e.useEffect((()=>()=>{var e,t,s;(null==(e=u.current)?void 0:e.chartInstance)&&u.current.chartInstance.destroy(),(null==(t=g.current)?void 0:t.chartInstance)&&g.current.chartInstance.destroy(),(null==(s=b.current)?void 0:s.chartInstance)&&b.current.chartInstance.destroy()}),[]),e.useEffect((()=>{var e,s,a,r,l,n,o,c;if(t)try{const x={labels:["Price","SMA20","SMA50"],datasets:[{label:"Technical Indicators",data:[(null==(e=t.technical)?void 0:e.price)||0,(null==(s=t.technical)?void 0:s.sma20)||0,(null==(a=t.technical)?void 0:a.sma50)||0],borderColor:"rgb(75, 192, 192)",tension:.1}]},u="POSITIVE"===(null==(r=t.llm)?void 0:r.sentiment)?1:"NEGATIVE"===(null==(l=t.llm)?void 0:l.sentiment)?-1:0,g={labels:["Positive","Neutral","Negative"],datasets:[{data:[1===u?1:0,0===u?1:0,-1===u?1:0],backgroundColor:["rgba(75, 192, 192, 0.5)","rgba(255, 206, 86, 0.5)","rgba(255, 99, 132, 0.5)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},b={labels:["Positive","Neutral","Negative"],datasets:[{data:[(null==(n=t.newsSentiment)?void 0:n.positiveCount)||0,(null==(o=t.newsSentiment)?void 0:o.neutralCount)||0,(null==(c=t.newsSentiment)?void 0:c.negativeCount)||0],backgroundColor:["rgba(75, 192, 192, 0.5)","rgba(255, 206, 86, 0.5)","rgba(255, 99, 132, 0.5)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]};i(x),d(g),m(b),h(null)}catch(x){h("Failed to prepare chart data")}}),[t,s]);return t?x?te.jsx("div",{className:"text-center text-red-400 py-8",children:x}):te.jsxs("div",{className:"analysis-visualization",children:[te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 sm:gap-6",children:[te.jsxs("div",{className:"bg-gray-800 p-4 sm:p-5 rounded-2xl shadow-md",children:[te.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-5 text-white",children:"Technical Analysis"}),te.jsx("div",{className:"h-[250px] sm:h-[300px]",children:n&&te.jsx(U,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"white",font:{size:14,weight:"bold"}}},title:{display:!0,text:"Technical Analysis",color:"white",font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,ticks:{color:"white",font:{size:12,weight:"bold"}},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"white",font:{size:12,weight:"bold"}},grid:{color:"rgba(255, 255, 255, 0.1)"}}}},ref:u})}),(null==(a=t.technical)?void 0:a.signals)&&te.jsxs("div",{className:"mt-4 sm:mt-5",children:[te.jsx("h4",{className:"text-base sm:text-lg font-medium mb-3 text-white",children:"Technical Signals"}),te.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(t.technical.signals).map((([e,t])=>te.jsxs("div",{className:"bg-gray-700 p-3 rounded-xl",children:[te.jsxs("span",{className:"font-medium text-white",children:[e,":"]})," ",te.jsx("span",{className:""+(t.toLowerCase().includes("bullish")?"text-green-500 font-bold":t.toLowerCase().includes("bearish")?"text-red-500 font-bold":"text-white"),children:t})]},e)))})]})]}),te.jsxs("div",{className:"bg-gray-800 p-4 sm:p-5 rounded-2xl shadow-md",children:[te.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-5 text-white",children:"Sentiment Analysis"}),te.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-5",children:[te.jsx("div",{className:"h-[250px] sm:h-[300px]",children:o&&te.jsx(G,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"white",font:{size:14,weight:"bold"}}},title:{display:!0,text:"Market Sentiment",color:"white",font:{size:16,weight:"bold"}}},scales:{r:{beginAtZero:!0,ticks:{display:!1},grid:{display:!1},angleLines:{display:!1},pointLabels:{display:!1}}}},ref:g})}),t.llm&&te.jsxs("div",{className:"mt-3 sm:mt-4",children:[te.jsx("h4",{className:"text-base sm:text-lg font-medium mb-3 text-white",children:"âœ¨ AI Analysis"}),te.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl",children:[te.jsxs("p",{className:"mb-2 text-white",children:[te.jsx("span",{className:"font-medium",children:"Sentiment:"})," ",te.jsx("span",{className:""+("POSITIVE"===t.llm.sentiment?"text-green-500 font-bold":"NEGATIVE"===t.llm.sentiment?"text-red-500 font-bold":"text-yellow-500 font-bold"),children:t.llm.sentiment?t.llm.sentiment.charAt(0)+t.llm.sentiment.slice(1).toLowerCase():"Neutral"})]}),te.jsxs("p",{className:"mb-2 text-white",children:[te.jsx("span",{className:"font-medium",children:"Score:"})," ",(null==(r=t.llm.score)?void 0:r.toFixed(2))||"0.00"]}),te.jsxs("p",{className:"mb-2 text-white",children:[te.jsx("span",{className:"font-medium",children:"Confidence:"})," ",(100*(t.llm.confidence||0)).toFixed(1),"%"]}),t.llm.summary&&te.jsxs("p",{className:"text-white mt-2",children:[te.jsx("span",{className:"font-medium",children:"Summary:"})," ",t.llm.summary]})]})]})]})]}),te.jsxs("div",{className:"bg-gray-800 p-4 sm:p-5 rounded-2xl shadow-md",children:[te.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-5 text-white",children:"Fundamental Analysis"}),(null==(l=t.fundamental)?void 0:l.signals)&&te.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(t.fundamental.signals).map((([e,t])=>te.jsxs("div",{className:"bg-gray-700 p-4 rounded-xl",children:[te.jsx("h4",{className:"font-medium mb-2 text-white",children:e}),te.jsx("p",{className:"text-white",children:t})]},e)))})]}),te.jsxs("div",{className:"bg-gray-800 p-4 sm:p-5 rounded-2xl shadow-md",children:[te.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-5 text-white",children:"News Sentiment"}),te.jsx("div",{className:"h-[250px] sm:h-[300px]",children:c&&te.jsx(G,{data:c,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"white",font:{size:14,weight:"bold"}}},title:{display:!0,text:"News Sentiment Distribution",color:"white",font:{size:16,weight:"bold"}}},scales:{r:{beginAtZero:!0,ticks:{display:!1},grid:{display:!1},angleLines:{display:!1},pointLabels:{display:!1}}}},ref:b})}),t.newsSentiment&&te.jsx("div",{className:"mt-4 sm:mt-5",children:te.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[te.jsxs("div",{className:"bg-gray-700 p-3 rounded-xl text-center",children:[te.jsx("span",{className:"text-green-500 font-bold",children:"Positive"}),te.jsx("p",{className:"text-white mt-1",children:t.newsSentiment.positiveCount})]}),te.jsxs("div",{className:"bg-gray-700 p-3 rounded-xl text-center",children:[te.jsx("span",{className:"text-yellow-500 font-bold",children:"Neutral"}),te.jsx("p",{className:"text-white mt-1",children:t.newsSentiment.neutralCount})]}),te.jsxs("div",{className:"bg-gray-700 p-3 rounded-xl text-center",children:[te.jsx("span",{className:"text-red-500 font-bold",children:"Negative"}),te.jsx("p",{className:"text-white mt-1",children:t.newsSentiment.negativeCount})]})]})})]})]}),t.summary&&te.jsxs("div",{className:"mt-6 sm:mt-8 bg-gray-800 p-5 sm:p-6 rounded-2xl shadow-md",children:[te.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-5 text-white",children:"âœ¨ Overall Analysis"}),te.jsx("div",{className:"bg-gray-700 p-5 sm:p-6 rounded-xl whitespace-pre-line",children:te.jsx("p",{className:"text-base sm:text-lg text-white leading-relaxed",children:t.summary})})]})]}):te.jsx("div",{className:"text-center text-gray-400 py-8",children:"No analysis data available"})};pe.propTypes={analysis:P.shape({technical:P.shape({price:P.number,sma20:P.number,sma50:P.number,signals:P.object}),fundamental:P.shape({signals:P.object}),llm:P.shape({sentiment:P.string,confidence:P.number}),newsSentiment:P.shape({positiveCount:P.number,neutralCount:P.number,negativeCount:P.number}),summary:P.string}),technicalData:P.object};const ye=({selectedStock:t})=>{const{symbol:a}=s(),r=(null==t?void 0:t.symbol)||a,[l,n]=e.useState(null),[i,o]=e.useState(!0);e.useState(!0);const[d,m]=e.useState(null);e.useState("1D");const[x,h]=e.useState("analysis"),[u,g]=e.useState([]),[b,p]=e.useState("1D"),[y,f]=e.useState(null),[v,j]=e.useState(null),[w,C]=e.useState(!1),[E,I]=e.useState([]);e.useEffect((()=>{(async()=>{try{const e=await c.get("/api/favorites",re);if(I(e.data),r){const t=e.data.some((e=>e.symbol===r));C(t)}}catch(e){}})()}),[r]);e.useEffect((()=>{(async()=>{var e,s,a;try{if(!r||"undefined"===r)return m("Invalid stock symbol"),void o(!1);o(!0);const l=await c.get(`/api/analysis/${r}`,re);let i=null,d=null,x=null;if(l.data.aiAnalysis){const e=/current(?:\s+price|\s+stock\s+price|\s+trading\s+price)?\s+(?:is|of)\s+\$?([\d,]+\.?\d*)/i,t=l.data.aiAnalysis.match(e);if(t)i=parseFloat(t[1].replace(/,/g,""));else{const e=l.data.aiAnalysis.split("\n\n")[0].match(/\$\s*([\d,]+\.?\d*)/);if(e)i=parseFloat(e[1].replace(/,/g,""));else{const e=l.data.aiAnalysis.match(/\$\s*([\d,]+\.?\d*)/);e&&(i=parseFloat(e[1].replace(/,/g,"")))}}const s=[/market\s+cap(?:italization)?\s+of\s+\$?\s*([\d,]+\.?\d*)\s+(trillion|billion|million|thousand|[TBMK])/i,/market\s+cap(?:italization)?\s+(?:is|at)\s+\$?\s*([\d,]+\.?\d*)\s+(trillion|billion|million|thousand|[TBMK])/i,/\$?\s*([\d,]+\.?\d*)\s+(trillion|billion|million|thousand|[TBMK])\s+market\s+cap/i];let a=null;for(const i of s){const e=l.data.aiAnalysis.match(i);if(e){a=e;break}}if(a){let e=parseFloat(a[1].replace(/,/g,""));const t=a[2].toLowerCase();t.includes("trillion")||"t"===t?e*=1e12:t.includes("billion")||"b"===t?e*=1e9:t.includes("million")||"m"===t?e*=1e6:(t.includes("thousand")||"k"===t)&&(e*=1e3),x=e}const r=[/(up|down|increased|decreased|gained|lost|rose|fell|climbing|dropping|jumped|plunged).*?(\d+\.?\d*)%/i,/(\d+\.?\d*)%\s+(up|down|increase|decrease|gain|loss|rise|fall)/i,/change of\s+([+-]?\d+\.?\d*)%/i,/changed by\s+([+-]?\d+\.?\d*)%/i,/percent(?:age)? change of\s+([+-]?\d+\.?\d*)%?/i];let n=null;for(const i of r){const e=l.data.aiAnalysis.match(i);if(e){n=e;break}}if(n)if(n[1].startsWith("+")||n[1].startsWith("-"))d=parseFloat(n[1]);else if(!isNaN(parseFloat(n[1]))){let e=parseFloat(n[1]);n[2]?n[2].match(/(down|decreased|decrease|lost|loss|fell|fall|dropping|plunged)/i)&&(e=-e):n[0].match(/(down|decreased|decrease|lost|loss|fell|fall|dropping|plunged)/i)&&(e=-e),d=e}}const h=(null==t?void 0:t.price)||l.data.price||i||null,u=(null==t?void 0:t.change)||l.data.change||d||null,b=(null==t?void 0:t.changePercent)||l.data.changePercent||d||null;let p=null;if(null==t?void 0:t.marketCap)p=t.marketCap;else if(l.data.marketCap)if("string"==typeof l.data.marketCap){const e=l.data.marketCap.replace(/[^0-9.]/g,"");p=parseFloat(e),l.data.marketCap.includes("T")?p*=1e12:l.data.marketCap.includes("B")?p*=1e9:l.data.marketCap.includes("M")?p*=1e6:l.data.marketCap.includes("K")&&(p*=1e3)}else p=l.data.marketCap;else p=x||((null==(e=l.data.companyOverview)?void 0:e.MarketCapitalization)?parseFloat(l.data.companyOverview.MarketCapitalization):"MSFT"===r||"AAPL"===r||"GOOGL"===r||"AMZN"===r||"META"===r?1e11:1e9);const y={...l.data,price:h,change:u,changePercent:b,marketCap:p,volume:(null==t?void 0:t.volume)||l.data.volume||null};if(n(y),f(h),null!==b)j(b);else if(l.data.previousClose&&h){const e=(h-l.data.previousClose)/l.data.previousClose*100;j(e)}if(l.data.recentNews){let e=null;if(l.data.newsSentiment){e=l.data.newsSentiment;let t=0,r=0,n=0;if(l.data.newsSentiment.analyzedArticles&&l.data.newsSentiment.analyzedArticles.forEach((e=>{var s;const a=(null==(s=e.sentiment)?void 0:s.toUpperCase())||"NEUTRAL";"POSITIVE"===a?t++:"NEGATIVE"===a?r++:n++})),l.data.newsSentiment.sentiment){const e=l.data.newsSentiment.sentiment.toUpperCase(),a=l.data.newsSentiment.confidence||.5;if(0===t&&0===r&&0===n){const i=(null==(s=l.data.recentNews)?void 0:s.length)||5;"POSITIVE"===e?(t=Math.round(i*a),n=i-t):"NEGATIVE"===e?(r=Math.round(i*a),n=i-r):n=i}}y.newsSentiment={positiveCount:t,negativeCount:r,neutralCount:n},y.llm={sentiment:l.data.newsSentiment.sentiment||"NEUTRAL",confidence:l.data.newsSentiment.confidence||.5,score:l.data.newsSentiment.score||0,summary:null==(a=l.data.newsSentiment.summary)?void 0:a.replace(/15 recent news articles/g,`${l.data.recentNews.length} recent news articles`)}}const t=l.data.recentNews.map(((t,s)=>{let a=null;if(e&&e.analyzedArticles&&e.analyzedArticles.length>0){let s=e.analyzedArticles.find((e=>e.title===t.title));s||(s=e.analyzedArticles.find((e=>!(!e.title||!t.title)&&(e.title.includes(t.title)||t.title.includes(e.title))))),s&&(a=s.sentiment.toUpperCase())}return{title:t.title||"No title",url:t.url||"#",source:t.source||"Unknown source",date:t.date||"No date",summary:t.summary||"No summary available",thumbnail:t.thumbnail||"https://placehold.co/150x150/1a1a1a/666666/png?text=No+Image",sentiment:a||"NEUTRAL",index:s}}));if(e&&e.sentiment){const s=e.sentiment.toUpperCase(),a=e.confidence||.8,r=t.filter((e=>"NEUTRAL"===e.sentiment));if(r.length>0){const e=Math.ceil(r.length*a);let l="NEUTRAL";"POSITIVE"===s?l="POSITIVE":"NEGATIVE"===s&&(l="NEGATIVE"),r.forEach(((s,r)=>{const n=s.index;if(r<e)t[n].sentiment=l;else{const e=Math.random()<a;t[n].sentiment=e?l:"NEUTRAL"}}));t.filter((e=>"POSITIVE"===e.sentiment)).length,t.filter((e=>"NEGATIVE"===e.sentiment)).length,t.filter((e=>"NEUTRAL"===e.sentiment)).length}}g(t)}else g([])}catch(l){k.error("Failed to fetch analysis"),m("Failed to fetch analysis data")}finally{o(!1)}})()}),[r,t]);return i?te.jsx(N,{size:"large"}):d?te.jsx("div",{className:"text-red-500 text-center p-4",children:d}):l?te.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[te.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 p-4 rounded-2xl",children:te.jsxs("div",{className:"flex justify-between items-start",children:[te.jsxs("div",{children:[te.jsxs("h3",{className:"text-lg font-semibold text-blue-400 mb-2 flex items-center",children:[te.jsx("span",{className:"mr-2",children:"â„¹ï¸"}),l.name," (",r,") Analysis Dashboard"]}),te.jsxs("p",{className:"text-gray-300",children:["You're viewing comprehensive stock analysis for ",l.name,". Explore price data, technical indicators, sentiment analysis, and news below."]})]}),te.jsx("button",{onClick:async()=>{if(l)try{const e={symbol:r,name:l.name,price:y,change:v,changePercent:v};w?(await c.delete(`/api/favorites/${r}`,re),k.success(`${r} removed from favorites`),C(!1)):(await c.post("/api/favorites",e,re),k.success(`${r} added to favorites`),C(!0))}catch(e){k.error("Failed to update favorites")}},className:"p-2 rounded-full transition-colors duration-300 "+(w?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-[#262626] text-gray-400 hover:text-yellow-400 hover:bg-yellow-500/10"),"aria-label":w?"Remove from favorites":"Add to favorites",children:w?te.jsx(S,{className:"text-xl"}):te.jsx(A,{className:"text-xl"})})]})}),te.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl shadow-lg p-4 sm:p-6 border border-[#333333]",children:[te.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[te.jsxs("div",{children:[te.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-[#e6e6e6]",children:l.name}),te.jsx("p",{className:"text-gray-400 mt-1",children:r})]}),te.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"1D",label:"1D"},{value:"1W",label:"1W"},{value:"1M",label:"1M"},{value:"3M",label:"3M"},{value:"1Y",label:"1Y"}].map((e=>te.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-300 "+(b===e.value?"bg-blue-500 text-white":"bg-[#262626] text-gray-400 hover:text-[#e6e6e6]"),onClick:()=>p(e.value),children:e.label},e.value)))})]}),te.jsx("div",{className:"h-[300px] sm:h-[400px] mb-6 bg-[#1a1a1a] border border-[#333333] rounded-xl overflow-hidden",children:te.jsx(he,{symbol:r,interval:b,theme:"dark"})}),te.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[te.jsxs("div",{className:"bg-[#262626] rounded-xl p-4 border border-[#333333]",children:[te.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-400",children:"Current Price"}),te.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-[#e6e6e6]",children:["$",null!=y?Number(y).toFixed(2):"N/A"]})]}),te.jsxs("div",{className:"rounded-xl p-4 border "+(v>0?"bg-green-500/10 border-green-500/20":v<0?"bg-red-500/10 border-red-500/20":"bg-[#262626] border-[#333333]"),children:[te.jsx("p",{className:"text-xs sm:text-sm font-bold text-gray-400",children:"24h Change"}),te.jsx("p",{className:"text-xl sm:text-2xl font-bold "+(v>0?"text-green-400":v<0?"text-red-400":"text-gray-400"),children:null!=v?`${v>0?"+":""}${Number(v).toFixed(2)}%`:"N/A"})]}),te.jsxs("div",{className:"bg-[#262626] rounded-xl p-4 border border-[#333333]",children:[te.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-400",children:"Volume"}),te.jsx("p",{className:"text-xl sm:text-2xl font-bold text-[#e6e6e6]",children:(null==l?void 0:l.volume)?fe(Number(l.volume)):"N/A"})]}),te.jsxs("div",{className:"bg-[#262626] rounded-xl p-4 border border-[#333333]",children:[te.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-400",children:"Market Cap"}),te.jsx("p",{className:"text-xl sm:text-2xl font-bold text-[#e6e6e6]",children:null!==(null==l?void 0:l.marketCap)&&void 0!==(null==l?void 0:l.marketCap)?ve(Number(l.marketCap)):"N/A"})]})]})]}),te.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl shadow-lg border border-[#333333] overflow-hidden",children:[te.jsxs("div",{className:"flex border-b border-[#333333]",children:[te.jsx("button",{className:"flex-1 py-3 px-4 text-center font-semibold "+("analysis"===x?"text-blue-400 border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-[#e6e6e6] hover:bg-[#262626]"),onClick:()=>h("analysis"),children:"Stock Analysis"}),te.jsx("button",{className:"flex-1 py-3 px-4 text-center font-semibold "+("peers"===x?"text-blue-400 border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-[#e6e6e6] hover:bg-[#262626]"),onClick:()=>h("peers"),children:"Industry Comparison"})]}),te.jsx("div",{className:"p-4 sm:p-6",children:"analysis"===x?te.jsxs(te.Fragment,{children:[te.jsx(pe,{analysis:l,technicalData:null==l?void 0:l.technical}),te.jsx("div",{className:"mt-8",children:te.jsx(be,{news:u})})]}):te.jsx(ge,{symbol:r})})]})]}):te.jsx("div",{children:"No analysis available"})};function fe(e){return e>=1e9?(e/1e9).toFixed(2)+"B":e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(2)+"K":e.toString()}function ve(e){return!e||isNaN(e)||0===e?"N/A":e>=1e6?"$"+(e/1e6).toFixed(2)+" T":e>1e3?"$"+(e/1e3).toFixed(2)+" B":e>1?"$"+e.toFixed(2)+" M":"$"+(1e3*e).toFixed(2)+" K"}function je(){const e=a(),{theme:t}=me();return te.jsx("div",{className:"w-full max-w-7xl mx-auto",children:te.jsxs("div",{className:"text-center space-y-12",children:[te.jsxs("div",{children:[te.jsxs("h2",{className:`text-5xl font-bold ${"dark"===t?"text-white":"text-gray-800"} mb-6`,children:["Welcome to",te.jsx("div",{className:"inline-block transform hover:scale-105 transition-all duration-300 ml-3",children:te.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-1 rounded-2xl shadow-lg",children:te.jsx("div",{className:("dark"===t?"bg-[#1a1a1a]":"bg-white")+" rounded-xl px-4 py-2",children:te.jsxs("span",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 tracking-tight",children:["BÃ¶",te.jsx("span",{className:"text-yellow-400",children:"rs"}),"vy"]})})})})]}),te.jsx("p",{className:`text-xl ${"dark"===t?"text-gray-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Your intelligent companion for stock market analysis and insights. Start by searching for a stock or explore our trending picks."})]}),te.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[te.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 backdrop-blur-sm",children:[te.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Real-time Data"}),te.jsx("p",{className:"text-gray-400",children:"Get instant access to live market data and updates"})]}),te.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 backdrop-blur-sm",children:[te.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Smart Analytics"}),te.jsx("p",{className:"text-gray-400",children:"Advanced tools for market analysis and insights"})]}),te.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 backdrop-blur-sm",children:[te.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Market Intelligence"}),te.jsx("p",{className:"text-gray-400",children:"Stay informed with comprehensive market research"})]})]}),te.jsxs("div",{children:[te.jsx("h3",{className:`text-2xl font-bold ${"dark"===t?"text-white":"text-gray-800"} mb-8`,children:"Popular Stocks"}),te.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 max-w-5xl mx-auto",children:[{symbol:"AAPL",name:"Apple Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"AMZN",name:"Amazon.com Inc."},{symbol:"META",name:"Meta Platforms Inc."},{symbol:"TSLA",name:"Tesla Inc."}].map((s=>te.jsxs("button",{onClick:()=>{return t=s.symbol,void e(`/analysis/${t}`);var t},className:`group relative p-4 ${"dark"===t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-xl border \n                hover:border-blue-500 hover:shadow-lg hover:shadow-blue-500/20 \n                transition-all duration-300 overflow-hidden transform hover:-translate-y-1`,children:[te.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 \n                              opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),te.jsxs("div",{className:"relative",children:[te.jsx("span",{className:`text-xl font-bold ${"dark"===t?"text-white group-hover:text-blue-400":"text-gray-800 group-hover:text-blue-600"} transition-colors duration-300`,children:s.symbol}),te.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-500 \n                                group-hover:w-full transition-all duration-300"})]})]},s.symbol)))})]})]})})}function Ne(){const{theme:e,toggleTheme:t}=me();return te.jsx("button",{onClick:t,className:"p-2 rounded-full transition-colors duration-300 focus:outline-none","aria-label":"dark"===e?"Switch to light mode":"Switch to dark mode",children:"dark"===e?te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-400 hover:text-yellow-300",viewBox:"0 0 20 20",fill:"currentColor",children:te.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600 hover:text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:te.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}const{Header:we,Content:ke,Sider:Se}=C,Ae={v7_startTransition:!0,v7_relativeSplatPath:!0},Ce=({collapsed:e,onClose:t})=>{const s=l().pathname,{theme:a}=me();return te.jsx(T,{theme:a,mode:"inline",selectedKeys:"/"===s?["home"]:"/favorites"===s?["favorites"]:s.includes("/analysis")?["analysis"]:s.includes("/chart")?["chart"]:[],className:""+("dark"===a?"bg-[#1a1a1a] border-r border-[#333333]":"bg-white border-r border-gray-200"),items:[{key:"home",icon:te.jsx(F,{}),label:te.jsx(n,{to:"/",children:"Home"})},{key:"favorites",icon:te.jsx(A,{}),label:te.jsx(n,{to:"/favorites",children:"Favorites"})}]})},Ee=()=>{const[t,s]=e.useState([]),[a,r]=e.useState(null),[d,m]=e.useState(!1),[x,h]=e.useState(null),[u,g]=e.useState([]),[b,p]=e.useState(null),[y,f]=e.useState(!1),[v,j]=e.useState(window.innerWidth<768),N=l(),{theme:w}=me();e.useEffect((()=>{"/favorites"===N.pathname&&r(null)}),[N.pathname]);e.useEffect((()=>{const e=()=>{j(window.innerWidth<768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const S=async()=>{try{f(!0);const e=await c.get("/api/favorites",re);g(e.data)}catch(e){k.error("Failed to fetch favorites")}finally{f(!1)}},T=e=>{r(e),h(null)},F=async e=>{try{u.some((t=>t.symbol===e.symbol))?(await c.delete(`/api/favorites/${e.symbol}`,re),k.success("Removed from favorites")):(await c.post("/api/favorites",e,re),k.success("Added to favorites")),S()}catch(t){k.error("Failed to update favorites")}};return e.useEffect((()=>{S()}),[]),e.useEffect((()=>{"dark"===w?document.body.classList.add("dark"):document.body.classList.remove("dark")}),[w]),te.jsxs(C,{className:"min-h-screen",children:[te.jsxs(Se,{trigger:null,collapsible:!0,collapsed:v,collapsedWidth:0,width:250,className:"fixed h-full z-30 left-0 top-0 dark:bg-[#1a1a1a] bg-white dark:border-[#333333] border-gray-200 border-r",children:[te.jsx("div",{className:"p-4 h-16 flex items-center border-b border-[#333333]",children:te.jsx(n,{to:"/",className:"flex items-center",children:te.jsx("div",{className:"transform transition-all duration-300",children:te.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-0.5 rounded-lg shadow-md",children:te.jsx("div",{className:("dark"===w?"bg-[#1a1a1a]":"bg-white")+" rounded-md px-3 py-1",children:te.jsxs("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 tracking-tight",children:["BÃ¶",te.jsx("span",{className:"text-yellow-400",children:"rs"}),"vy"]})})})})})}),te.jsx(Ce,{collapsed:v,onClose:()=>j(!0)})]}),te.jsxs(C,{className:"transition-all duration-300 "+(v?"ml-0":"ml-[250px]"),children:[te.jsxs(we,{className:"sticky top-0 z-20 flex items-center h-16 px-4 bg-white dark:bg-[#1a1a1a] border-b border-gray-200 dark:border-[#333333]",children:[te.jsx("button",{onClick:()=>{j(!v)},className:"mr-4 text-gray-400 hover:text-white transition-colors",children:v?te.jsx(E,{}):te.jsx(I,{})}),te.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[te.jsx("div",{className:"md:hidden",children:!v&&te.jsx("div",{className:"transform transition-all duration-300",children:te.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 p-0.5 rounded-lg shadow-md",children:te.jsx("div",{className:"bg-[#1a1a1a] rounded-md px-3 py-1",children:te.jsxs("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 tracking-tight",children:["BÃ¶",te.jsx("span",{className:"text-yellow-400",children:"rs"}),"vy"]})})})})}),te.jsx("div",{className:"flex items-center",children:te.jsx(Ne,{})})]})]}),te.jsxs(ke,{className:"p-4 sm:p-6 bg-slate-100 dark:bg-[#1a1a1a]",children:[te.jsxs(i,{children:[te.jsx(o,{path:"/",element:te.jsx(ie,{onSearch:async e=>{try{s(e),e&&e.length>0?r(e[0]):r(null),h(null)}catch(t){h("Failed to fetch search results. Please try again."),s([]),r(null)}},isLoading:d,onToggleFavorite:F,favorites:u})}),te.jsx(o,{path:"/favorites",element:te.jsx(xe,{favorites:u,onToggleFavorite:F,loading:y,onSelectStock:T})}),te.jsx(o,{path:"/analysis/:symbol",element:te.jsx(ye,{})}),te.jsx(o,{path:"/chart/:symbol",element:te.jsx(he,{})})]}),x&&te.jsx("div",{className:"bg-red-900/50 border border-red-500 rounded-xl p-4 mt-4",children:te.jsx("p",{className:"text-red-200 font-medium",children:x})}),b&&te.jsx("div",{className:"bg-red-900/50 border border-red-500 rounded-xl p-4 mt-4",children:te.jsx("p",{className:"text-red-200 font-medium",children:b})}),t.length||a||"/"!==N.pathname?te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-8 mt-4 sm:mt-8",children:[te.jsx("div",{className:"lg:col-span-1",children:t.length>0?te.jsxs(te.Fragment,{children:[te.jsx(oe,{stocks:t,selectedStock:a,onSelectStock:T,favorites:u,onToggleFavorite:F,isLoading:d}),te.jsxs("div",{className:"mt-4 bg-[#1a1a1a] rounded-2xl shadow-md p-4 border border-[#333333]",children:[te.jsx("div",{className:"flex items-center justify-between mb-2",children:te.jsxs("h3",{className:"text-lg font-semibold text-[#e6e6e6] flex items-center",children:[te.jsx(A,{className:"mr-2 text-yellow-400"})," Quick Favorites"]})}),u.length>0?te.jsx("div",{className:"overflow-x-auto pb-2 flex-nowrap hide-scrollbar",children:te.jsx("div",{className:"flex space-x-2",children:u.map((e=>te.jsx("button",{onClick:()=>T(e),className:"flex-shrink-0 px-3 py-2 rounded-lg border "+((null==a?void 0:a.symbol)===e.symbol?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-[#262626] border-[#333333] text-gray-300 hover:border-blue-500/50"),children:e.symbol},e.symbol)))})}):te.jsx("p",{className:"text-gray-500 text-sm",children:"No favorites yet"}),te.jsx("div",{className:"mt-2 text-right",children:te.jsx(n,{to:"/favorites",className:"text-xs text-blue-400 hover:text-blue-300",children:"View all favorites â†’"})})]})]}):null}),te.jsx("div",{className:"lg:col-span-3",children:a&&te.jsx(ye,{selectedStock:a})})]}):te.jsx("div",{className:"flex justify-center items-center min-h-[calc(100vh-300px)] -mt-8",children:te.jsx(je,{})})]})]})]})};function Ie(){const{theme:t}=me();return e.useEffect((()=>{"dark"===t?document.body.classList.add("dark"):document.body.classList.remove("dark")}),[t]),te.jsx(r,{future:Ae,children:te.jsx(Ee,{})})}se.createRoot(document.getElementById("root")).render(te.jsx(d.StrictMode,{children:te.jsx(ce,{children:te.jsx(Ie,{})})}));
